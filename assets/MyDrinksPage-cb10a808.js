import{k as s,l as r,m as g,o as h,b as j,c as C,r as m,j as i,p}from"./index-c4692de3.js";import{T as y}from"./Title-f233d8e5.js";import{S as w,N as x,D as v}from"./NotFound-53bed4c5.js";import{b as L}from"./selectors-5d6c5d01.js";const l=s("cocktails/getAll",async(t,e)=>{try{const{data:a}=await r.get("/cocktails");return a}catch(a){return e.rejectWithValue(a.message)}}),n=s("cocktails/getFavorite",async(t,e)=>{try{const{data:a}=await r.get("/api/users/favorites");return console.log(a),a}catch(a){return e.rejectWithValue(a.message)}}),d=s("cocktails/addCocktail",async(t,e)=>{try{const{data:a}=await r.post("/cocktails",t);return a}catch(a){return e.rejectWithValue(a.message)}}),k=s("cocktails/deleteCocktail",async(t,e)=>{try{const{data:a}=await r.delete(`/cocktails/${t}`);return a}catch(a){return e.rejectWithValue(a.message)}}),u=s("cocktails/addToFavorite",async(t,e)=>{try{const{data:a}=await r.put(`/cocktails/${t.id}`,t);return a}catch(a){return e.rejectWithValue(a.message)}}),f=s("cocktails/deleteFromFavorite",async(t,e)=>{try{const{data:a}=await r.put(`/cocktails/${t.id}`,t);return a}catch(a){return e.rejectWithValue(a.message)}}),o=s("coctails/fetchOwnCoctails",async(t,e)=>{try{const{data:a}=await r.get("/drinks/own");return console.log(a),a}catch(a){return e.rejectWithValue(a.message)}}),F={cocktails:[],ownCocktails:[],favoriteCocktails:[],isLoading:!1,error:null},D=g({name:"cocktails",initialState:F,reducers:{},extraReducers:t=>t.addCase(o.fulfilled,(e,{payload:a})=>{e.isLoading=!1,e.ownCocktails=a}).addCase(l.fulfilled,(e,{payload:a})=>{e.isLoading=!1,e.cocktails=a}).addCase(n.fulfilled,(e,{payload:a})=>{e.isLoading=!1,e.favoriteCocktails=a}).addCase(d.fulfilled,(e,{payload:a})=>{e.isLoading=!1,e.cocktails=[...e.cocktails,a]}).addCase(k.fulfilled,(e,{payload:a})=>{e.isLoading=!1,e.cocktails=e.cocktails.filter(c=>c.id!==a.id)}).addCase(u.fulfilled,(e,{payload:a})=>{e.isLoading=!1,e.cocktails=e.cocktails.filter(c=>c.id!==a.id),e.cocktails=[...e.cocktails,a]}).addCase(f.fulfilled,(e,{payload:a})=>{e.isLoading=!1,e.cocktails=e.cocktails.filter(c=>c.id!==a.id),e.cocktails=[...e.cocktails,a]}).addMatcher(h(o.pending,l.pending,n.pending,d.pending,k.pending,u.pending,f.pending),e=>{e.isLoading=!0,e.error=null}).addMatcher(h(o.rejected,l.rejected,n.rejected,d.rejected,k.rejected,u.rejected,f.rejected),(e,{payload:a})=>{e.isLoading=!1,e.error=a})});D.reducer;const T=()=>{const t=j(),e=C(L);m.useEffect(()=>{t(o())},[t]);const a=c=>{t(p(c)).then(()=>{t(o())})};return i.jsxs("main",{className:"container",children:[i.jsx(y,{text:"My drinks"}),e.length===0?i.jsxs(w,{children:[i.jsx(x,{}),i.jsx("p",{children:"You haven't added any favorite cocktails yet"})]}):i.jsx(v,{children:e.drinks.map(c=>i.jsxs("div",{children:[i.jsx("p",{children:c.drink}),i.jsx("button",{onClick:()=>a(c._id),children:"Delete"})]},c._id))})]})};export{T as default};
