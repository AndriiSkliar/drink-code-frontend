import{s,t as r,w as p,x as h,a as j,b as C,r as y,j as i,y as w}from"./index-3b60cef1.js";import{T as x}from"./Title-5b7099e5.js";import{S as v,D}from"./FavoritesPage.styled-5c6bc6a6.js";import{N as L}from"./NotFound-20abc1c9.js";import{g as F}from"./selectors-d3804845.js";const m=s("cocktails/fetchHomepage",async(t,a)=>{try{const{token:e}=a.getState().auth;if(console.log(e),!e)return null;const c={headers:{Authorization:`Bearer ${e}`}},g=(await r.get("api/drinks/mainpage",c)).data;return console.log("fetchHomePageDrinks data",g),g}catch(e){throw console.error("Error while fetching data",e),e}}),n=s("cocktails/getAll",async(t,a)=>{try{const{data:e}=await r.get("/cocktails");return e}catch(e){return a.rejectWithValue(e.message)}}),l=s("cocktails/getFavorite",async(t,a)=>{try{const{data:e}=await r.get("/api/users/favorites");return console.log(e),e}catch(e){return a.rejectWithValue(e.message)}}),d=s("cocktails/addCocktail",async(t,a)=>{try{const{data:e}=await r.post("/cocktails",t);return e}catch(e){return a.rejectWithValue(e.message)}}),k=s("cocktails/deleteCocktail",async(t,a)=>{try{const{data:e}=await r.delete(`/cocktails/${t}`);return e}catch(e){return a.rejectWithValue(e.message)}}),u=s("cocktails/addToFavorite",async(t,a)=>{try{const{data:e}=await r.put(`/cocktails/${t.id}`,t);return e}catch(e){return a.rejectWithValue(e.message)}}),f=s("cocktails/deleteFromFavorite",async(t,a)=>{try{const{data:e}=await r.put(`/cocktails/${t.id}`,t);return e}catch(e){return a.rejectWithValue(e.message)}}),o=s("coctails/fetchOwnCoctails",async(t,a)=>{try{const{data:e}=await r.get("/drinks/own");return console.log(e),e}catch(e){return a.rejectWithValue(e.message)}}),S={cocktails:[],ownCocktails:[],favoriteCocktails:[],homepageDrinks:[],isLoading:!1,error:null},V=p({name:"cocktails",initialState:S,reducers:{},extraReducers:t=>t.addCase(o.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.ownCocktails=e}).addCase(n.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.cocktails=e}).addCase(l.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.favoriteCocktails=e}).addCase(d.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.cocktails=[...a.cocktails,e]}).addCase(k.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.cocktails=a.cocktails.filter(c=>c.id!==e.id)}).addCase(u.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.cocktails=a.cocktails.filter(c=>c.id!==e.id),a.cocktails=[...a.cocktails,e]}).addCase(f.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.cocktails=a.cocktails.filter(c=>c.id!==e.id),a.cocktails=[...a.cocktails,e]}).addCase(drinksOperations.fetchHomePageDrinks.fulfilled,(a,{payload:e})=>{a.isLoading=!1,a.homepageDrinks=e}).addMatcher(h(o.pending,n.pending,l.pending,d.pending,k.pending,u.pending,f.pending,m.pending),a=>{a.isLoading=!0,a.error=null}).addMatcher(h(o.rejected,n.rejected,l.rejected,d.rejected,k.rejected,u.rejected,f.rejected,m.rejected),(a,{payload:e})=>{a.isLoading=!1,a.error=e})});V.reducer;const H=()=>{const t=j(),a=C(F);y.useEffect(()=>{t(o())},[t]);const e=c=>{t(w(c)).then(()=>{t(o())})};return i.jsxs("main",{className:"container",children:[i.jsx(x,{text:"My drinks"}),a.length===0?i.jsxs(v,{children:[i.jsx(L,{}),i.jsx("p",{children:"You haven't added any favorite cocktails yet"})]}):i.jsx(D,{children:a.drinks.map(c=>i.jsxs("div",{children:[i.jsx("p",{children:c.drink}),i.jsx("button",{onClick:()=>e(c._id),children:"Delete"})]},c._id))})]})};export{H as default};
